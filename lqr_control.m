% 状态转移矩阵
A = [   0,  0,      0,  0,      0.01625,0.01625,0,      0;
        0,  0,      1,  0,      0,      0,      0,      0;
        0,  220,    0,  0,      0,      0,      -138,   -138;
        0,  0,      0,  0,      -0.387, 0.387,  0,      0;
        0,  -384,   0,  0,      0,      0,      644,    0;
        0,  -384,   0,  0,      0,      0,      0,      644;
        0,  0,      0,  0,      -100,   0,      -10000, 0;
        0,  0,      0,  0,      0,      -100,   0,      -10000  ];
% 输入矩阵
B = [   0,      0;
        0,      0;
        0,      0;
        0,      0;
        0,      0;
        0,      0;
        1000,   0;
        0,      1000];
% 输出矩阵
C = [   0,0,0,0,0.01625,0.01625,0,0;
        0,0,0,0,-0.387, 0.387,  0,0 ];
% Q矩阵
Q = [   10,0,0,0,0,0,0,0;
        0,1,0,0,0,0,0,0;
        0,0,1,0,0,0,0,0;
        0,0,0,10,0,0,0,0;
        0,0,0,0,1,0,0,0;
        0,0,0,0,0,1,0,0;
        0,0,0,0,0,0,1,0;
        0,0,0,0,0,0,0,1     ];
% R矩阵
R = [   1,0;
        0,1     ];
% 求状态反馈矩阵
[K,P] = lqr(A,B,Q,R);
BlanceCarSimscape;
